{
  "version": 3,
  "sources": ["../@vueuse/head/dist/index.mjs"],
  "sourcesContent": ["// src/index.ts\nimport {\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  ref,\n  watchEffect\n} from \"vue\";\n\n// src/constants.ts\nvar PROVIDE_KEY = `usehead`;\nvar HEAD_COUNT_KEY = `head:count`;\nvar HEAD_ATTRS_KEY = `data-head-attrs`;\nvar SELF_CLOSING_TAGS = [\"meta\", \"link\", \"base\"];\n\n// src/create-element.ts\nvar createElement = (tag, attrs, document) => {\n  const el = document.createElement(tag);\n  for (const key of Object.keys(attrs)) {\n    let value = attrs[key];\n    if (key === \"key\" || value === false) {\n      continue;\n    }\n    if (key === \"children\") {\n      el.textContent = value;\n    } else {\n      el.setAttribute(key, value);\n    }\n  }\n  return el;\n};\n\n// src/stringify-attrs.ts\nvar htmlEscape = (str) => str.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\nvar stringifyAttrs = (attributes) => {\n  const handledAttributes = [];\n  for (let [key, value] of Object.entries(attributes)) {\n    if (key === \"children\" || key === \"key\") {\n      continue;\n    }\n    if (value === false || value == null) {\n      continue;\n    }\n    let attribute = htmlEscape(key);\n    if (value !== true) {\n      attribute += `=\"${htmlEscape(String(value))}\"`;\n    }\n    handledAttributes.push(attribute);\n  }\n  return handledAttributes.length > 0 ? \" \" + handledAttributes.join(\" \") : \"\";\n};\n\n// src/index.ts\nvar getTagKey = (props) => {\n  if (props.key !== void 0) {\n    return {name: \"key\", value: props.key};\n  }\n  if (props.name !== void 0) {\n    return {name: \"name\", value: props.name};\n  }\n  if (props.property !== void 0) {\n    return {\n      name: \"property\",\n      value: props.property\n    };\n  }\n};\nvar injectHead = () => {\n  const head = inject(PROVIDE_KEY);\n  if (!head) {\n    throw new Error(`You may forget to apply app.use(head)`);\n  }\n  return head;\n};\nvar acceptFields = [\n  \"title\",\n  \"meta\",\n  \"link\",\n  \"base\",\n  \"style\",\n  \"script\",\n  \"htmlAttrs\",\n  \"bodyAttrs\"\n];\nvar headObjToTags = (obj) => {\n  const tags = [];\n  for (const key of Object.keys(obj)) {\n    if (obj[key] == null)\n      continue;\n    if (key === \"title\") {\n      tags.push({tag: key, props: {children: obj[key]}});\n    } else if (key === \"base\") {\n      tags.push({tag: key, props: {key: \"default\", ...obj[key]}});\n    } else if (acceptFields.includes(key)) {\n      const value = obj[key];\n      if (Array.isArray(value)) {\n        value.forEach((item) => {\n          tags.push({tag: key, props: item});\n        });\n      } else if (value) {\n        tags.push({tag: key, props: value});\n      }\n    }\n  }\n  return tags;\n};\nvar setAttrs = (el, attrs) => {\n  const existingAttrs = el.getAttribute(HEAD_ATTRS_KEY);\n  if (existingAttrs) {\n    for (const key of existingAttrs.split(\",\")) {\n      el.removeAttribute(key);\n    }\n  }\n  const keys = [];\n  for (const key in attrs) {\n    const value = attrs[key];\n    if (value == null)\n      continue;\n    if (value === false) {\n      el.removeAttribute(key);\n    } else {\n      el.setAttribute(key, value);\n    }\n    keys.push(key);\n  }\n  if (keys.length) {\n    el.setAttribute(HEAD_ATTRS_KEY, keys.join(\",\"));\n  } else {\n    el.removeAttribute(HEAD_ATTRS_KEY);\n  }\n};\nvar insertTags = (tags, document = window.document) => {\n  const head = document.head;\n  let headCountEl = head.querySelector(`meta[name=\"${HEAD_COUNT_KEY}\"]`);\n  const headCount = headCountEl ? Number(headCountEl.getAttribute(\"content\")) : 0;\n  const oldElements = [];\n  if (headCountEl) {\n    for (let i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = j.previousElementSibling) {\n      if (j) {\n        oldElements.push(j);\n      }\n    }\n  } else {\n    headCountEl = document.createElement(\"meta\");\n    headCountEl.setAttribute(\"name\", HEAD_COUNT_KEY);\n    headCountEl.setAttribute(\"content\", \"0\");\n    head.append(headCountEl);\n  }\n  const newElements = [];\n  let title;\n  let htmlAttrs = {};\n  let bodyAttrs = {};\n  for (const tag of tags) {\n    if (tag.tag === \"title\") {\n      title = tag.props.children;\n      continue;\n    }\n    if (tag.tag === \"htmlAttrs\") {\n      Object.assign(htmlAttrs, tag.props);\n      continue;\n    }\n    if (tag.tag === \"bodyAttrs\") {\n      Object.assign(bodyAttrs, tag.props);\n      continue;\n    }\n    newElements.push(createElement(tag.tag, tag.props, document));\n  }\n  oldElements.forEach((el) => {\n    el.remove();\n  });\n  if (title !== void 0) {\n    document.title = title;\n  }\n  setAttrs(document.documentElement, htmlAttrs);\n  setAttrs(document.body, bodyAttrs);\n  newElements.forEach((el) => {\n    head.insertBefore(el, headCountEl);\n  });\n  headCountEl.setAttribute(\"content\", \"\" + newElements.length);\n};\nvar createHead = () => {\n  let allHeadObjs = [];\n  const head = {\n    install(app) {\n      app.config.globalProperties.$head = head;\n      app.provide(PROVIDE_KEY, head);\n    },\n    get headTags() {\n      const deduped = [];\n      allHeadObjs.forEach((objs) => {\n        const tags = headObjToTags(objs.value);\n        tags.forEach((tag) => {\n          if (tag.tag === \"meta\" || tag.tag === \"base\") {\n            const key = getTagKey(tag.props);\n            if (key) {\n              let index = -1;\n              for (let i = 0; i < deduped.length; i++) {\n                const prev = deduped[i];\n                const prevValue = prev.props[key.name];\n                const nextValue = tag.props[key.name];\n                if (prev.tag === tag.tag && prevValue === nextValue) {\n                  index = i;\n                  break;\n                }\n              }\n              if (index !== -1) {\n                deduped.splice(index, 1);\n              }\n            }\n          }\n          deduped.push(tag);\n        });\n      });\n      return deduped;\n    },\n    addHeadObjs(objs) {\n      allHeadObjs.push(objs);\n    },\n    removeHeadObjs(objs) {\n      allHeadObjs = allHeadObjs.filter((_objs) => _objs !== objs);\n    },\n    updateDOM(document) {\n      insertTags(head.headTags, document);\n    }\n  };\n  return head;\n};\nvar IS_BROWSER = typeof window !== \"undefined\";\nvar useHead = (obj) => {\n  const headObj = ref(obj);\n  const head = injectHead();\n  head.addHeadObjs(headObj);\n  if (IS_BROWSER) {\n    watchEffect(() => {\n      head.updateDOM();\n    });\n    onBeforeUnmount(() => {\n      head.removeHeadObjs(headObj);\n      head.updateDOM();\n    });\n  }\n};\nvar tagToString = (tag) => {\n  let attrs = stringifyAttrs(tag.props);\n  if (SELF_CLOSING_TAGS.includes(tag.tag)) {\n    return `<${tag.tag}${attrs}>`;\n  }\n  return `<${tag.tag}${attrs}>${tag.props.children || \"\"}</${tag.tag}>`;\n};\nvar renderHeadToString = (head) => {\n  const tags = [];\n  let titleTag = \"\";\n  let htmlAttrs = {};\n  let bodyAttrs = {};\n  for (const tag of head.headTags) {\n    if (tag.tag === \"title\") {\n      titleTag = tagToString(tag);\n    } else if (tag.tag === \"htmlAttrs\") {\n      Object.assign(htmlAttrs, tag.props);\n    } else if (tag.tag === \"bodyAttrs\") {\n      Object.assign(bodyAttrs, tag.props);\n    } else {\n      tags.push(tagToString(tag));\n    }\n  }\n  tags.push(`<meta name=\"${HEAD_COUNT_KEY}\" content=\"${tags.length}\">`);\n  return {\n    get headTags() {\n      return titleTag + tags.join(\"\");\n    },\n    get htmlAttrs() {\n      return stringifyAttrs({\n        ...htmlAttrs,\n        [HEAD_ATTRS_KEY]: Object.keys(htmlAttrs).join(\",\")\n      });\n    },\n    get bodyAttrs() {\n      return stringifyAttrs({\n        ...bodyAttrs,\n        [HEAD_ATTRS_KEY]: Object.keys(bodyAttrs).join(\",\")\n      });\n    }\n  };\n};\nvar vnodesToHeadObj = (nodes) => {\n  const obj = {\n    title: void 0,\n    htmlAttrs: void 0,\n    bodyAttrs: void 0,\n    base: void 0,\n    meta: [],\n    link: [],\n    style: [],\n    script: []\n  };\n  for (const node of nodes) {\n    const type = node.type === \"html\" ? \"htmlAttrs\" : node.type === \"body\" ? \"bodyAttrs\" : node.type;\n    if (typeof type !== \"string\" || !(type in obj))\n      continue;\n    const props = {\n      ...node.props,\n      children: Array.isArray(node.children) ? node.children[0].children : node.children\n    };\n    if (Array.isArray(obj[type])) {\n      ;\n      obj[type].push(props);\n    } else if (type === \"title\") {\n      obj.title = props.children;\n    } else {\n      ;\n      obj[type] = props;\n    }\n  }\n  return obj;\n};\nvar Head = defineComponent({\n  name: \"Head\",\n  setup(_, {slots}) {\n    const head = injectHead();\n    let obj;\n    onBeforeUnmount(() => {\n      if (obj) {\n        head.removeHeadObjs(obj);\n        head.updateDOM();\n      }\n    });\n    return () => {\n      watchEffect(() => {\n        if (!slots.default)\n          return;\n        if (obj) {\n          head.removeHeadObjs(obj);\n        }\n        obj = ref(vnodesToHeadObj(slots.default()));\n        head.addHeadObjs(obj);\n        if (IS_BROWSER) {\n          head.updateDOM();\n        }\n      });\n      return null;\n    };\n  }\n});\nexport {\n  Head,\n  createHead,\n  injectHead,\n  renderHeadToString,\n  useHead\n};\n"],
  "mappings": "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",
  "names": []
}
