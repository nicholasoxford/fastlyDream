import {
  __commonJS,
  __name,
  require_vue_runtime_esm_bundler
} from "./chunk-PHAHCSWL.js";

// node_modules/fastify-vite/hooks.js
var require_hooks = __commonJS((exports, module) => {
  var {getCurrentInstance} = require_vue_runtime_esm_bundler();
  async function useServerData(...args) {
    let dataKey = "$data";
    let initialData;
    if (args.length === 1) {
      if (typeof args[0] === "string") {
        dataKey = args[0];
      } else if (typeof args[0] === "function") {
        initialData = args[0];
      }
    } else if (args.length > 1) {
      dataKey = args[0];
      initialData = args[1];
    }
    const isSSR = typeof window === "undefined";
    const appInstance = getCurrentInstance();
    const appConfig = appInstance ? appInstance.appContext.app.config : null;
    let $data;
    if (isSSR && initialData) {
      if (!appConfig) {
        return initialData();
      }
      appConfig.globalProperties[dataKey] = await initialData();
      $data = appConfig.globalProperties[dataKey];
      return $data;
    } else if (initialData) {
      if (!appConfig) {
        return initialData();
      }
      if (!appConfig.globalProperties[dataKey]) {
        appConfig.globalProperties[dataKey] = await initialData();
      }
      $data = appConfig.globalProperties[dataKey];
      appConfig.globalProperties[dataKey] = void 0;
      return $data;
    } else {
      const $data2 = appConfig.globalProperties[dataKey];
      const $dataPath = appConfig.globalProperties.$dataPath;
      appConfig.globalProperties[dataKey] = void 0;
      return [$data2, $dataPath()];
    }
  }
  __name(useServerData, "useServerData");
  function useServerAPI() {
    const appConfig = getCurrentInstance().appContext.app.config;
    const {$api} = appConfig.globalProperties;
    return $api;
  }
  __name(useServerAPI, "useServerAPI");
  module.exports = {useServerData, useServerAPI};
});

// dep:fastify-vite_hooks
var fastify_vite_hooks_default = require_hooks();
export {
  fastify_vite_hooks_default as default
};
//# sourceMappingURL=fastify-vite_hooks.js.map
